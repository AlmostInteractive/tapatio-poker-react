(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(21)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(7),c=a.n(n),i=(a(14),a(1)),l=a(2),u=a(4),d=a(3),o=a(5),h=(a(15),Object.freeze({battleTime:1e3,clearTime:3e3,pointsToScoreTime:2e3})),p=(a(16),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={cards:[]},a.cards=[],a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"".concat(this.props.id)},function(){for(var t=[],a=0;a<parseInt(e.size()/5);a++){var r=s.a.createElement("img",{src:"/images/cards/b.gif",className:"card stacked",style:{right:2*a+"px",bottom:a+"px"},key:a,alt:"card"});t.push(r)}return t}())}},{key:"draw",value:function(e){if(e<=0)return[];void 0===e&&(e=1);for(var t=this.cards,a=[];e--;)a.push(t.shift());return this.setCards(t),a}},{key:"size",value:function(){return this.cards.length}},{key:"shuffleNewDeck",value:function(){for(var e=function(e){switch(e){case 0:return"c";case 1:return"d";case 2:return"h";case 3:return"s";default:return""}},t=[],a=1;a<=13;a++)for(var r=0;r<4;r++)t.push({faceValue:a,front:a+e(r)+".gif",back:"b.gif"});t.shuffle(),this.setCards(t)}},{key:"setCards",value:function(e){this.cards=e.slice(),this.setState({cards:e.slice()})}}]),t}(s.a.Component)),f=(a(17),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).setSelectedCards=function(e){a.setState({selected:e.slice()})},a.state={cards:[],selected:[]},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.cards;return s.a.createElement("div",{id:"".concat(this.props.id),className:"hand"},function(){for(var a=[],r=function(r){var n=t[r],c=n.front,i=n.back,l=e.props.player?c:i,u=-1!==e.state.selected.indexOf(r),d=s.a.createElement("div",{className:"card spread"+(u?" selected":""),key:r},s.a.createElement("img",{src:"/images/cards/"+l,className:"card",alt:"card",onClick:e.props.onSelected?function(){return e.props.onSelected(r)}:null}));a.push(d)},n=0;n<t.length;n++)r(n);return a}())}},{key:"size",value:function(){return this.state.cards.length}},{key:"setCards",value:function(e){this.setState({cards:e.slice()})}},{key:"getNotSelected",value:function(){for(var e=[],t=0;t<5;t++)-1===this.state.selected.indexOf(t)&&e.push(this.state.cards[t]);return e}},{key:"hold",value:function(){for(var e=this.state.cards,t=new Set(this.state.selected),a=e.length;a>=0;a--)t.has(a)||e.splice(a,1);this.setState({cards:e,selected:[]})}},{key:"play",value:function(){var e=this.state.cards;if(this.state.selected.length<1)throw new Error("Playing unselected cards");var t=this.state.selected[0],a=e.splice(t,1)[0];return this.setState({cards:e}),a}}]),t}(s.a.Component)),m=(a(18),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={score:0},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"".concat(this.props.id),className:"score"},"score: ",this.state.score)}},{key:"reset",value:function(){this.setState({score:0})}},{key:"value",value:function(){return this.state.score}},{key:"increment",value:function(e){this.setState({score:Math.max(0,this.state.score+e)}),this.forceUpdate()}}]),t}(s.a.Component)),v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={points:0,final:!1},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return 0===this.state.points?null:s.a.createElement("div",{id:"".concat(this.props.id),className:"points"},"points: ",s.a.createElement("span",{className:this.state.final?"final":""},this.state.points))}},{key:"reset",value:function(){this.setState({points:0,final:!1})}},{key:"increment",value:function(){this.setState({points:this.state.points+1})}},{key:"setFinal",value:function(e){this.setState({points:e,final:!0})}},{key:"value",value:function(){return this.state.points}}]),t}(s.a.Component),y=(a(19),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={card:null,winner:!1,tie:!1},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(!this.state.card)return null;var e=this.state.card.front;return s.a.createElement("div",{id:"".concat(this.props.id),className:"battle"},this.state.winner?s.a.createElement("div",{className:"battle_result"},"Winner!"):"",this.state.tie?s.a.createElement("div",{className:"battle_result"},"Tie..."):"",s.a.createElement("img",{src:"/images/cards/"+e,className:"card",alt:"card"}))}},{key:"reset",value:function(){this.setState({card:null,winner:!1,tie:!1})}},{key:"setCardAndResults",value:function(e,t,a){var r=this;this.setState({card:e}),setTimeout(function(){return r.setState({winner:t,tie:a})},h.battleTime)}}]),t}(s.a.Component)),b=(a(20),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={cards:[]},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.cards;return s.a.createElement("div",{id:"".concat(this.props.id),className:"played"},function(){for(var t=[],a=0;a<e.length;a++){var r=e[a].front,n=s.a.createElement("div",{className:"card stacked",style:{left:15*a+"px"},key:a},s.a.createElement("img",{src:"/images/cards/"+r,className:"card",alt:"card"}));t.push(n)}return t}())}},{key:"reset",value:function(){this.setState({cards:[]})}},{key:"addCard",value:function(e){var t=this.state.cards.slice();t.push(e),this.setState({cards:t})}}]),t}(s.a.Component)),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={cards:[]},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.cards;return s.a.createElement("div",{id:"".concat(this.props.id),className:"discard"},function(){for(var t=[],a=0;a<e.length;a++){var r=e[a].back,n=s.a.createElement("div",{className:"card stacked",style:{right:5*a+"px"},key:a},s.a.createElement("img",{src:"/images/cards/"+r,className:"card",alt:"card"}));t.push(n)}return t}())}},{key:"reset",value:function(){this.setState({cards:[]})}},{key:"addCards",value:function(e){var t=this.state.cards.concat(e);this.setState({cards:t})}}]),t}(s.a.Component),S=Object.freeze({SelectHand:1,PlayCards:2,Battle:3,TallyPoints:4,GameOver:5}),C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleCardClick=function(e){switch(a.state.gameState){case S.SelectHand:a.selectCards(e,3);break;case S.PlayCards:a.selectCards(e,1)}},a.keepCards=function(){a.player.discard.current.addCards(a.player.hand.current.getNotSelected()),a.cpu.discard.current.addCards(a.cpu.hand.current.getNotSelected()),a.player.hand.current.hold(),a.cpu.hand.current.hold(),a.setGameState(S.PlayCards)},a.playCard=function(){a.setGameState(S.Battle);var e=a.cpu.hand.current.play(),t=a.player.hand.current.play(),r=e.faceValue===t.faceValue,s=e.faceValue>t.faceValue,n=!r&&!s;a.player.battle.current.setCardAndResults(t,n,r),a.cpu.battle.current.setCardAndResults(e,s,r),n?setTimeout(function(){a.player.points.current.increment()},h.battleTime):s&&setTimeout(function(){a.cpu.points.current.increment()},h.battleTime);setTimeout(function(){a.player.battle.current.setCardAndResults(null,!1,!1),a.cpu.battle.current.setCardAndResults(null,!1,!1),a.player.played.current.addCard(t),a.cpu.played.current.addCard(e),a.player.hand.current.size()>0?a.setGameState(S.PlayCards):a.setGameState(S.TallyPoints)},h.clearTime)},a.deck=s.a.createRef(),a.player={hand:s.a.createRef(),battle:s.a.createRef(),discard:s.a.createRef(),points:s.a.createRef(),score:s.a.createRef(),played:s.a.createRef()},a.cpu={hand:s.a.createRef(),battle:s.a.createRef(),discard:s.a.createRef(),points:s.a.createRef(),score:s.a.createRef(),played:s.a.createRef()},a.state={gameState:-1,selected:[]},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.startNewGame()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{id:"game_board"},s.a.createElement(p,{id:"deck",ref:this.deck}),s.a.createElement(f,{id:"my_hand",ref:this.player.hand,player:!0,onSelected:this.handleCardClick}),s.a.createElement(f,{id:"cpu_hand",ref:this.cpu.hand,player:!1}),s.a.createElement(y,{id:"my_battle",ref:this.player.battle}),s.a.createElement(y,{id:"cpu_battle",ref:this.cpu.battle}),s.a.createElement(k,{id:"my_discard",ref:this.player.discard}),s.a.createElement(k,{id:"cpu_discard",ref:this.cpu.discard}),s.a.createElement(m,{id:"my_score",ref:this.player.score}),s.a.createElement(m,{id:"cpu_score",ref:this.cpu.score}),s.a.createElement(v,{id:"my_points",ref:this.player.points}),s.a.createElement(v,{id:"cpu_points",ref:this.cpu.points}),s.a.createElement(b,{id:"my_played",ref:this.player.played}),s.a.createElement(b,{id:"cpu_played",ref:this.cpu.played}),function(){if(e.state.gameState!==S.GameOver)return null;var t=e.player.score.current.value(),a=e.cpu.score.current.value();return t===a?s.a.createElement("div",{id:"game_over"},"Tie Game!"):t>a?s.a.createElement("div",{id:"game_over"},"You Win!"):s.a.createElement("div",{id:"game_over"},"Computer Wins!")}()),s.a.createElement("div",null,function(){switch(e.state.gameState){case S.SelectHand:var t=3-e.state.selected.length;return t>0?s.a.createElement("div",null,"Select ",t," more card",1===t?"":"s"," to keep"):s.a.createElement("button",{onClick:e.keepCards},"Keep Cards");case S.PlayCards:return e.state.selected.length?s.a.createElement("button",{onClick:e.playCard},"Play Card"):s.a.createElement("div",null,"Select a card to play");case S.GameOver:return s.a.createElement("button",{onClick:function(){return e.startNewGame}},"Play Again");default:return null}}()))}},{key:"startNewGame",value:function(){this.setGameState(S.SelectHand)}},{key:"startNewRound",value:function(){this.deck.current.size()<10&&(this.deck.current.shuffleNewDeck(),this.player.played.current.reset(),this.cpu.played.current.reset(),this.player.discard.current.reset(),this.cpu.discard.current.reset()),this.player.hand.current.setCards(this.deck.current.draw(5)),this.cpu.hand.current.setCards(this.deck.current.draw(5));var e=[0,1,2,3,4].shuffle().splice(0,3);this.cpu.hand.current.setSelectedCards(e)}},{key:"startNewBattle",value:function(){this.setState({selected:[]}),this.player.hand.current.setSelectedCards([]),this.cpu.hand.current.setSelectedCards([0])}},{key:"setGameState",value:function(e){var t=this;switch(this.setState({gameState:e}),e){case S.SelectHand:this.startNewRound();break;case S.PlayCards:this.startNewBattle();break;case S.Battle:this.player.hand.current.setSelectedCards([]),this.cpu.hand.current.setSelectedCards([]),this.setState({selected:[]});break;case S.TallyPoints:this.player.battle.current.reset(),this.cpu.battle.current.reset();var a=this.player.points.current.value(),r=this.cpu.points.current.value();3===a?a=-3:3===r&&(r=-3),this.player.points.current.setFinal(a),this.cpu.points.current.setFinal(r),setTimeout(function(){t.player.points.current.reset(),t.cpu.points.current.reset(),t.player.score.current.increment(a),t.cpu.score.current.increment(r),t.player.score.current.value()>=10||t.cpu.score.current.value()>=10?t.setGameState(S.GameOver):t.setGameState(S.SelectHand)},h.pointsToScoreTime);break;case S.GameOver:}}},{key:"selectCards",value:function(e,t){var a=this.state.selected,r=a.indexOf(e);-1!==r?(a.splice(r,1),this.setState({selected:a.slice()})):a.length<t&&(a.push(e),this.setState({selected:a.slice()})),this.player.hand.current.setSelectedCards(a)}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Array.prototype.shuffle=function(){for(var e,t,a=this.length;0!==a;)t=Math.floor(Math.random()*a),e=this[a-=1],this[a]=this[t],this[t]=e;return this},c.a.render(s.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[8,1,2]]]);
//# sourceMappingURL=main.1266440f.chunk.js.map